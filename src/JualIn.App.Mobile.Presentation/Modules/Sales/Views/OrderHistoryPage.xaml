<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="JualIn.App.Mobile.Presentation.Modules.Sales.Views.OrderHistoryPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:JualIn.App.Mobile.Presentation.UI.Controls"
    xmlns:converters="clr-namespace:JualIn.App.Mobile.Presentation.UI.Controls.Converters"
    xmlns:horus="clr-namespace:HorusStudio.Maui.MaterialDesignControls;assembly=HorusStudio.Maui.MaterialDesignControls"
    xmlns:icons="clr-namespace:UraniumUI.Icons.MaterialSymbols;assembly=UraniumUI.Icons.MaterialSymbols"
    xmlns:layouts="clr-namespace:JualIn.App.Mobile.Presentation.Modules.Sales.Views.Layouts"
    xmlns:pages="clr-namespace:JualIn.App.Mobile.Presentation.Modules.Sales.Views"
    xmlns:strings="clr-namespace:JualIn.App.Mobile.Presentation.Resources.Strings"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:vm="clr-namespace:JualIn.App.Mobile.Presentation.Modules.Sales.ViewModels"
    x:Name="root"
    x:DataType="{x:Type vm:OrderHistoryViewModel}">
    <ContentPage.Behaviors>
        <toolkit:EventToCommandBehavior
            BindingContext="{Binding Path=BindingContext, Source={x:Reference root}, x:DataType={x:Type pages:OrderHistoryPage}}"
            Command="{Binding AppearingCommand}"
            EventName="Appearing" />
        <toolkit:EventToCommandBehavior
            BindingContext="{Binding Path=BindingContext, Source={x:Reference root}, x:DataType={x:Type pages:OrderHistoryPage}}"
            Command="{Binding NavigatedToCommand}"
            EventName="NavigatedTo" />
    </ContentPage.Behaviors>

    <ScrollView>
        <VerticalStackLayout
            Margin="{StaticResource AppLayoutPadding}"
            HorizontalOptions="Fill"
            Spacing="{StaticResource CommonSpaceBetweenSmall}">
            <controls:AppSearchBar Grid.Column="0" HorizontalOptions="Fill" />

            <VerticalStackLayout BindableLayout.ItemsSource="{Binding Orders}" Spacing="{StaticResource CommonSpaceBetweenMicro}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <layouts:OrderHistoryItemView Margin="{StaticResource CommonSpaceNanoAll}" />
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
                <BindableLayout.EmptyView>
                    <horus:MaterialLabel Text="No transaction data" />
                </BindableLayout.EmptyView>
            </VerticalStackLayout>

            <horus:MaterialProgressIndicator IsVisible="{Binding IsRefreshing}" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>